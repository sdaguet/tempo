<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<template id="assets_backend" name="puthod assets" inherit_id="web.assets_backend">
		<xpath expr="." position="inside">
			<script type="text/javascript" src="/darb_puthod/static/src/js/website_puthod.js"></script>
			<link rel="stylesheet"
					href="/darb_puthod/static/src/less/muk_web_glyphicons.less" />
		</xpath>
	</template>

    <template id="header" inherit_id="website.layout" name="Chantiers Ouverts">
	  <xpath expr="//header//ul[@id='top_menu']/li" position="before">
	      <li>
	          <a href="/chantiersnew">
	              <i class="fa"></i>
	              Nouveaux Chantiers
	          </a>
	      </li>
		  <li>
	          <a href="/chantierslist">
	              <i class="fa"></i>
	              Chantiers Ouverts
	          </a>
	      </li>
		  <li>
	          <a href="/pointages">
	              <i class="fa"></i>
	              Présences
	          </a>
	      </li>

          <li>
	          <a href="/ficheslist">
	              <i class="fa"></i>
	              Fiches de chantier
	          </a>
	      </li>

          <li>
	          <a href="/equipes">
	              <i class="fa"></i>
	              Equipes
	          </a>
	      </li>
	  </xpath>
    </template>

	<template id="pointages" name="Pointage des Equipes" page="True">
		<t t-call="website.layout">

		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<h1>Pointages</h1>
				<div class="row">
					<div class="col-md-8">
						<div class="oe_structure">
							<div>
								<p>Vous pouvez marquer les présences ci-après.</p>
							</div>
						</div>
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Nom</th>
								<th>Equipe</th>
								<th>Presence</th>
							</tr>
						</thead>
						<t t-foreach="teams" t-as="team">
							<t t-foreach="team.ressource_list" t-as="membr">
							<tr>
							<td><span t-att-value="membr.id" class="membrid" t-field="membr.name"/>
							</td>
							<td><span class="teamname" t-field="team.name"/>
							</td>
							<td>
								<a t-attf-href="#" class="btn btn-primary pointer">Present</a>
								<a t-attf-href="#" class="btn btn-primary depointer">Absent</a>
							</td>
							</tr>
							</t>
						</t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
	</template>

	<template id="ficheviewer" name="Saisie Chantier">
		<t t-call="website.layout">
			<link rel="stylesheet" type="text/css" href="font-awesome/css/font-awesome.min.css" />
			<div class="container">
				<div class="row">
					<div class="col-md-14">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Planning Employés</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<table class="table table-hover status_table">
									<thead>
										<tr class="active">
											<th>Employés</th>
											<th>Tâches</th>
											<th>Heure début</th>
											<th>Heure fin</th>
											<th>Validé</th>
										</tr>
									</thead>
									<t t-foreach="teams" t-as="team">
										<t t-foreach="team.ressource_list" t-as="membr">
										<tr>		
										<form action="/add/work" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
		          						<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
		          						<input type="hidden" name="fiche" t-att-value="fiche.id"/>
										<input type="hidden" name="employee" t-att-value="membr.id"/>
										<td><span class="teamname" t-field="membr.name"/>
										</td>
										<td>
					                      <select name="tesk_id" class="form-control">
					                          <option value="">Tâches...</option>
					                          <t t-foreach="tasks or []" t-as="task">
					                              <option t-att-value="task.id"><t t-esc="task.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td>
											<select name="heure_deb" class="form-control">
												<option value="7:00">7:00</option>
												<option value="7:15">7:15</option>
												<option value="7:30">7:30</option>
												<option value="8:00">8:00</option>
												<option value="8:15">8:15</option>
												<option value="8:30">8:30</option>
												<option value="9:00">9:00</option>
												<option value="9:15">9:15</option>
												<option value="9:30">9:30</option>
												<option value="10:00">10:00</option>
												<option value="10:15">10:15</option>
												<option value="10:30">10:30</option>
												<option value="11:00">11:00</option>
												<option value="11:15">11:15</option>
												<option value="11:30">11:30</option>
												<option value="12:00">12:00</option>
												<option value="13:00">13:00</option>
												<option value="13:15">13:15</option>
												<option value="13:30">13:30</option>
												<option value="14:00">14:00</option>
												<option value="14:15">14:15</option>
												<option value="14:30">14:30</option>
												<option value="15:00">15:00</option>
												<option value="15:15">15:15</option>
												<option value="15:30">15:30</option>
												<option value="16:00">16:00</option>
												<option value="16:15">16:15</option>
												<option value="16:30">16:30</option>
												<option value="17:00">17:00</option>
												<option value="17:15">17:15</option>
												<option value="17:30">17:30</option>
												<option value="18:00">18:00</option>
												<option value="18:15">18:15</option>
												<option value="18:30">18:30</option>
												<option value="19:00">19:00</option>
											</select>
										</td>
										<td>
											<select name="heure_fin" class="form-control">
												<option value="7:00">7:00</option>
												<option value="7:15">7:15</option>
												<option value="7:30">7:30</option>
												<option value="8:00">8:00</option>
												<option value="8:15">8:15</option>
												<option value="8:30">8:30</option>
												<option value="9:00">9:00</option>
												<option value="9:15">9:15</option>
												<option value="9:30">9:30</option>
												<option value="10:00">10:00</option>
												<option value="10:15">10:15</option>
												<option value="10:30">10:30</option>
												<option value="11:00">11:00</option>
												<option value="11:15">11:15</option>
												<option value="11:30">11:30</option>
												<option value="12:00">12:00</option>
												<option value="13:00">13:00</option>
												<option value="13:15">13:15</option>
												<option value="13:30">13:30</option>
												<option value="14:00">14:00</option>
												<option value="14:15">14:15</option>
												<option value="14:30">14:30</option>
												<option value="15:00">15:00</option>
												<option value="15:15">15:15</option>
												<option value="15:30">15:30</option>
												<option value="16:00">16:00</option>
												<option value="16:15">16:15</option>
												<option value="16:30">16:30</option>
												<option value="17:00">17:00</option>
												<option value="17:15">17:15</option>
												<option value="17:30">17:30</option>
												<option value="18:00">18:00</option>
												<option value="18:15">18:15</option>
												<option value="18:30">18:30</option>
												<option value="19:00">19:00</option>
											</select>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>
										</form>
										</tr>
										</t>
									</t>
								</table>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Véhicules</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/vehicles" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Véhicules</th>
												<th>KMS</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.veicule_ids" t-as="veicule">
											<tr>
											<td><span t-field="veicule.vehicle_id.name" class="vname" />
											</td>
											<td><span t-field="veicule.kms" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{veicule.id}/1" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="veicule_id" class="form-control">
					                          <option value="">Véhicules...</option>
					                          <t t-foreach="vehicles or []" t-as="vehicle">
					                              <option t-att-value="vehicle.id"><t t-esc="vehicle.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="km" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Matériels</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/materiels" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Matériels</th>
												<th>Temps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.materiel_ids" t-as="materiel">
											<tr>
											<td><span t-field="materiel.materiel_id.name" class="mname" />
											</td>
											<td><span t-field="materiel.temps" class="tname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{materiel.id}/2" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="materiel_id" class="form-control">
					                          <option value="">Matériels...</option>
					                          <t t-foreach="materiels or []" t-as="materiel">
					                              <option t-att-value="materiel.id"><t t-esc="materiel.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="temps" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Machines</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/machines" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Machines</th>
												<th>Temps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.machine_ids" t-as="machine">
											<tr>
											<td><span t-field="machine.machine_id.name" class="mname" />
											</td>
											<td><span t-field="machine.temps" class="tname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{machine.id}/3" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="machine_id" class="form-control">
					                          <option value="">Machines...</option>
					                          <t t-foreach="machines or []" t-as="machine">
					                              <option t-att-value="machine.id"><t t-esc="machine.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="temps" type="float" class="tname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Fournitures Plantation</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/fournitures" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Fournitures Plantation</th>
												<th>Qté</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.fourniture_ids" t-as="fourniture">
											<tr>
											<td><span t-field="fourniture.fourniture_id.name" class="mname" />
											</td>
											<td><span t-field="fourniture.quantity" class="qname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{fourniture.id}/4" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="fourniture_id" class="form-control">
					                          <option value="">Fournitures...</option>
					                          <t t-foreach="fournitures or []" t-as="fourniture">
					                              <option t-att-value="fourniture.id"><t t-esc="fourniture.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="quantity" type="float" class="tname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Kit RBKS</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/kits" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Kit RBKS</th>
												<th>Qté</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.kit_ids" t-as="kit">
											<tr>
											<td><span t-field="kit.kit_id.name" class="mname" />
											</td>
											<td><span t-field="kit.quantity" class="qname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{kit.id}/5" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="kit_id" class="form-control">
					                          <option value="">Kits...</option>
					                          <t t-foreach="kits or []" t-as="kit">
					                              <option t-att-value="kit.id"><t t-esc="kit.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="quantity" type="float" class="tname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Tuteurage</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/tuteurages" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Tuteurage</th>
												<th>Qté</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.tuteurage_ids" t-as="tuteurage">
											<tr>
											<td><span t-field="tuteurage.tuteurage_id.name" class="mname" />
											</td>
											<td><span t-field="tuteurage.quantity" class="qname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{tuteurage.id}/6" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="tuteurage_id" class="form-control">
					                          <option value="">Tuteurages...</option>
					                          <t t-foreach="tuteurages or []" t-as="tuteurage">
					                              <option t-att-value="tuteurage.id"><t t-esc="tuteurage.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="quantity" type="float" class="tname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-14">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Vigitaux</h3>
							<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
						</div>
						<div class="panel-body">
							<form action="/add/vigitaux" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
      							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
      							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

								<!--- DEBUT BOUCLE -->
								<div class="form-group form-field">
									<table class="table table-hover status_table">
									<thead>
										<tr class="active">
											<th>Date</th>
											<th>Vigitaux</th>
											<th>Commentaire</th>
											<th>Modifier</th>
										</tr>
									</thead>
									<t t-foreach="fiche.vigitaux_ids" t-as="vigitaux">
										<tr>
										<td><span t-field="vigitaux.date" class="kname"/>
										</td>
										<td><span t-field="vigitaux.vigitaux_id.name" class="vname" />
										</td>
										<td><span t-field="vigitaux.commentaire" class="kname"/>
										</td>
										<td>
											<a t-attf-href="/ficheslist/#{fiche.id}/#{vigitaux.id}/7" class="btn btn-primary vedit">Supprimer</a>
										</td>

										</tr>
									</t>
									<tr>
									<td><input name="date" type="date" class="kname"/>
									</td>
									<td>
				                      <select name="vigitaux_id" class="form-control">
				                          <option value="">Vigitaux...</option>
				                          <t t-foreach="vigitaux_list or []" t-as="vigitaux_list_id">
				                              <option t-att-value="vigitaux_list_id.id"><t t-esc="vigitaux_list_id.name"/></option>
				                          </t>
				                      </select>
									</td>
									<td><input name="commentaire" type="text" class="kname"/>
									</td>
									<td>
										<button name="submit" type="submit" > Ajouter </button>
									</td>

									</tr>
									</table>
								</div>
								<!--- FIN BOUCLE -->
							</form>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Engazonnement</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/engrais" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Engrais</th>
												<th>Qté/tps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.engrais_ids" t-as="engrai">
											<tr>
											<td><span t-field="engrai.engrais_id.name" class="vname" />
											</td>
											<td><span t-field="engrai.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{engrai.id}/8" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="engrais_id" class="form-control">
					                          <option value="">Engrais...</option>
					                          <t t-foreach="engrais or []" t-as="engrai">
					                              <option t-att-value="engrai.id"><t t-esc="engrai.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty_temps" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
							<div class="panel-body">
								<form action="/add/gazons" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Gazons</th>
												<th>Qté/tps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.gazons_ids" t-as="gazon">
											<tr>
											<td><span t-field="gazon.gazons_id.name" class="vname" />
											</td>
											<td><span t-field="gazon.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{gazon.id}/9" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="gazons_id" class="form-control">
					                          <option value="">Gazons...</option>
					                          <t t-foreach="gazons or []" t-as="gazon">
					                              <option t-att-value="gazon.id"><t t-esc="gazon.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty_temps" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
							<div class="panel-body">
								<form action="/add/gmateriel" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Matériels</th>
												<th>Qté/tps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.gmateriel_ids" t-as="gmateriel">
											<tr>
											<td><span t-field="gmateriel.gmateriel_id.name" class="vname" />
											</td>
											<td><span t-field="gmateriel.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{gazon.id}/10" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="gmateriel_id" class="form-control">
					                          <option value="">Gazons...</option>
					                          <t t-foreach="gmateriels or []" t-as="gmateriel">
					                              <option t-att-value="gmateriels.id"><t t-esc="gmateriels.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty_temps" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Escalier/Muret bois</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/escalier" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Escalier/Muret bois</th>
												<th>Qté</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.escalier_ids" t-as="escalier">
											<tr>
											<td><span t-field="escalier.escalier_id.name" class="vname" />
											</td>
											<td><span t-field="escalier.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{escalier.id}/11" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="escalier_id" class="form-control">
					                          <option value="">Escalier...</option>
					                          <t t-foreach="escaliers or []" t-as="escalier">
					                              <option t-att-value="escalier.id"><t t-esc="escalier.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Outils</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/outils" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Outils</th>
												<th>Tps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.outils_ids" t-as="outils">
											<tr>
											<td><span t-field="outils.outils_id.name" class="vname" />
											</td>
											<td><span t-field="outils.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{outils.id}/12" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="outils_id" class="form-control">
					                          <option value="">Outils...</option>
					                          <t t-foreach="outils or []" t-as="outil">
					                              <option t-att-value="outil.id"><t t-esc="outil.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Cloture</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/cloture" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Cloture</th>
												<th>Tps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.cloture_ids" t-as="cloture">
											<tr>
											<td><span t-field="cloture.cloture_id.name" class="vname" />
											</td>
											<td><span t-field="cloture.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{cloture.id}/13" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="cloture_id" class="form-control">
					                          <option value="">Cloture...</option>
					                          <t t-foreach="clotures or []" t-as="cloture">
					                              <option t-att-value="cloture.id"><t t-esc="cloture.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Divers</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/divers" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Divers</th>
												<th>Qté/tps</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.divers_ids" t-as="divers">
											<tr>
											<td><span t-field="divers.divers_id.name" class="vname" />
											</td>
											<td><span t-field="divers.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{divers.id}/14" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="divers_id" class="form-control">
					                          <option value="">Divers...</option>
					                          <t t-foreach="divers or []" t-as="diver">
					                              <option t-att-value="diver.id"><t t-esc="diver.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Terrasse</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/terrasse" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Terrasse</th>
												<th>Qté</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.terrasse_ids" t-as="terrasse">
											<tr>
											<td><span t-field="terrasse.terrasse_id.name" class="vname" />
											</td>
											<td><span t-field="terrasse.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{terrasse.id}/15" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="terrasse_id" class="form-control">
					                          <option value="">Terrasse...</option>
					                          <t t-foreach="terrasses or []" t-as="terrasse">
					                              <option t-att-value="terrasse.id"><t t-esc="terrasse.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Suite Cloture</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<form action="/add/scloture" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
          							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div class="form-group form-field">
										<table class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Suite Cloture</th>
												<th>Qté</th>
												<th>Modifier</th>
											</tr>
										</thead>
										<t t-foreach="fiche.scloture_ids" t-as="scloture">
											<tr>
											<td><span t-field="scloture.scloture_id.name" class="vname" />
											</td>
											<td><span t-field="scloture.quantity" class="kname"/>
											</td>
											<td>
												<a t-attf-href="/ficheslist/#{fiche.id}/#{scloture.id}/16" class="btn btn-primary vedit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select name="scloture_id" class="form-control">
					                          <option value="">Suite Cloture...</option>
					                          <t t-foreach="clotures or []" t-as="scloture">
					                              <option t-att-value="scloture.id"><t t-esc="scloture.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="kname"/>
										</td>
										<td>
											<button name="submit" type="submit" > Ajouter </button>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-14">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Commentaire</h3>
							<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
						</div>
						<div class="panel-body">
							<form action="/add/comment" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data"  data-model_name="fiche.chantier">
      							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
      							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

								<!--- DEBUT BOUCLE -->
								<div class="form-group form-field">
									<input name="comment" type="text" class="kname"/>
									<button name="submit" type="submit" > Ajouter </button>
								</div>
								<!--- FIN BOUCLE -->
							</form>
						</div>
					</div>
				</div>
			</div>

			<style>
				.panel-heading span
				{
					margin-top: -20px;
					font-size: 15px;
				}

				.row
				{
					margin-top: 40px;
					padding: 0 10px;
				}

				.clickable
				{
					cursor: pointer;
				}
			</style>

			<script type="text/javascript">
				jQuery(function ($) {
					$('.panel-heading span.clickable').on("click", function (e) {
						if ($(this).hasClass('panel-collapsed')) {
							// expand the panel
							$(this).parents('.panel').find('.panel-body').slideDown();
							$(this).removeClass('panel-collapsed');
							$(this).find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
						}
						else {
							// collapse the panel
							$(this).parents('.panel').find('.panel-body').slideUp();
							$(this).addClass('panel-collapsed');
							$(this).find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
						}
					});
				});
			</script>
		</t>
	</template>

    <template id="listchantiers" name="Liste des chantiers ouverts">
    	<t t-call="website.layout">
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<h1>Chantiers Ouverts</h1>
				<div class="row">
					<div class="col-md-8">
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Référence</th>
								<th>Client</th>
								<th>Chantier</th>
								<th>Date prévue</th>
								<th>Equipe</th>
							</tr>
						</thead>
						<t t-foreach="chantiers" t-as="chantier">
							<tr>
							<td><a href="/chantiersForm"><span t-field="chantier.name"/></a>
							</td>
							<td><span t-field="chantier.partner_id.name"/>
							</td>
							<td><span t-field="chantier.chantier_id.name"/>
							</td>
							<td><span t-field="chantier.inter_date"/>
							</td>
							<td><span t-field="chantier.equipe_id.name"/>
							</td>
							</tr>
						</t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
    </template>


<!--liste des fiches-->
    <template id="listfiches" name="Liste des fiches de chantiers">
    	<t t-call="website.layout">
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<h1>Fiches de chantiers</h1>
				<div class="row">
					<div class="col-md-11">
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Référence</th>
								<th>Date prévue</th>
								<th>Article</th>
								<th>Quantité d'articles</th>
								<th>Heures Totales</th>
								<th>Cycles totaux</th>
								<th>Document Source</th>
								<th>Status FC</th>
							</tr>
						</thead>
						<t t-set="hour_variable" t-value="0" />
						<t t-set="cycle_variable" t-value="0" />
						<t t-set="qte_variable" t-value="0" />
						<t t-foreach="fiches" t-as="fiche">
							<t t-set="hour_variable" t-value="hour_variable+fiche.hour_total" />
							<t t-set="cycle_variable" t-value="cycle_variable+fiche.cycle_total" />
							<t t-set="qte_variable" t-value="qte_variable+fiche.product_qty" />
							<tr>
							<td><a t-attf-href="/ficheslist/#{fiche.id}"><span t-field="fiche.name"/></a>
							</td>
							<td><span t-field="fiche.date_planned"/>
							</td>
							<td><span t-field="fiche.product_id"/>
							</td>
							<td><span t-field="fiche.product_qty"/>
							</td>
							<td><span t-field="fiche.hour_total"/>
							</td>
							<td><span t-field="fiche.cycle_total"/>
							</td>
							<td><span t-field="fiche.origin"/>
							</td><td><span t-field="fiche.state"/>
							</td>
							</tr>
						</t>
							<th></th>
							<th></th>
							<th></th>
							<th>
								<t t-esc="qte_variable"/>
							</th>
							<th class="text-left">
								<t t-esc="hour_variable"/>
							</th>
							<th class="text-left">
								<t t-esc="cycle_variable"/>
							</th>
							<td></td>
						</table>
					</div>
					<div class="col-md-1 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
    </template>

    <template id="formchantiers" name="Form des chantiers ouverts">

    	<t t-call="website.layout">

	  <div class="container panel-group mb32 mt32" id="debug_infos">
	      <li t-foreach="chantiers" t-as="cho">
	              <i class="fa"></i>
	              CO <div t-field="cho.name"/>
	      </li>

	  </div></t>
    </template>

	<template id="newchantiers" name="Form des chantiers ouverts">

    	<t t-call="website.layout">
		<div class="container panel-group mb32 mt32" id="debug_infos">
			<div id="xmap" style="width:1000px;height:1000px"></div>
		    <script language="javascript">
		    function initMap(domain){
		    	odoo.define('custom_webpage.my_js', function (require) {'use strict';
		    	var Model = require('web.Model');

				var model = new Model('chantier');
		    	model.call('get_google_maps_data', [domain]).then(function(results){
					var locations = results[0];
					var gm_configs = results[1];
					var map = new google.maps.Map(document.getElementById('xmap'), {
					  	zoom : gm_configs[2],
					  	center : new google.maps.LatLng(gm_configs[0], gm_configs[1]),
					  	mapTypeId : google.maps.MapTypeId.TERRAIN,
					  	mapTypeControl: false
					});
					console.log(locations);
					var infowindow = new google.maps.InfoWindow();

					var marker, i;

					for (i = 0; i &lt; locations.length; i++) {
					  	marker = new google.maps.Marker({
					  		position : new google.maps.LatLng(locations[i][1], locations[i][2]),
					  		map : map
					  	});

					  	google.maps.event.addListener(marker, 'click', (function(marker, i) {
					  		return function() {
					  			infowindow.setContent('<div>'+
										            '<h3>'+locations[i][4]+'</h3>'+
										            '<div>'+
										            '<p><b>'+locations[i][5]+'</b></p>'+
										            '<p><b>'+locations[i][0]+'</b></p>'+
										            '</div>'+
										            '</div>');
					  			infowindow.open(map, marker);
					  		}
					  	})(marker, i));
						google.maps.event.addListener(marker, "dblclick", (function (marker, i) {
					  		return function() {
				            	console.log("hhhhhhhhhhhhhhhhhhh");
								window.location.href = "/equiplist/chantier/"+locations[i][3];
							}
			            })(marker, i));
					  }
				});});
		    }
		    </script>
			<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD6zrIunSsB1pHvcaqUsSzqgneTR5ZcCz4&amp;callback=initMap"/>

		</div></t>
    </template>

	<template id="listequipes" name="Liste des equipes">
    	<t t-call="website.layout">
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<div class="row">
					<div class="col-md-8">
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Nom</th>
								<th>Chef</th>
								<th>Affecter</th>
							</tr>
						</thead>
						<t t-foreach="equipes" t-as="equipe">
							<tr>
							<td><span t-field="equipe.name"/>
							</td>
							<td><span t-field="equipe.manager.name"/>
							</td>
							<td><a t-attf-href="/equiplist/chantier/#{chantier_id}/#{equipe.id}" class="btn btn-primary pointer">Affecter</a>
							</td>
							</tr>
						</t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>

    </template>
    	<template id="newequipes" name="Equipes" page="True">
		<t t-call="website.layout">

		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<div class="row">
					<div class="col-md-8">
						<div class="oe_structure">
							<div>
								<p>Vous pouvez .......</p>
							</div>
						</div>
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Employés</th>
								<th>Affecter</th>
							</tr>
						</thead>
						<t t-foreach="employees" t-as="membr">
							<tr>
							<td><span t-att-value="membr.id" class="membrid" t-field="membr.name"/>
							</td>
							<td>
								<a t-attf-href="/equipes//#{equipe}/#{membr.id}" class="btn btn-primary depointer">Affecter</a>
							</td>
							</tr>
						</t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
	</template>
</odoo>