<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<template id="assets_frontend" name="Theme frontend assets" inherit_id="website.assets_frontend">
        <xpath expr="//link[last()]" position="after">
            <link rel="stylesheet"
					href="/darb_puthod/static/src/less/muk_web_glyphicons.less" type="text/less"/>			
        </xpath>
		<xpath expr="//script[last()]" position="inside">
			
		</xpath>
    </template>

    <template id="header" inherit_id="website.layout" name="Chantiers Ouverts">
	  <xpath expr="//header//ul[@id='top_menu']/li" position="before">
	      <li>
	          <a href="/chantiersnew">
	              <i class="fa"></i>
	              Nouveaux Chantiers
	          </a>
	      </li>
		  <li>
	          <a href="/chantierslist">
	              <i class="fa"></i>
	              Chantiers Ouverts
	          </a>
	      </li>
		  <li>
	          <a href="/pointages">
	              <i class="fa"></i>
	              Présences
	          </a>
	      </li>

          <li>
	          <a href="/ficheslist">
	              <i class="fa"></i>
	              Fiches de chantier
	          </a>
	      </li>

          <li>
	          <a href="/equipes">
	              <i class="fa"></i>
	              Equipes
	          </a>
	      </li>
	      
          <li>
	          <a href="/testajax">
	              <i class="fa"></i>
	              AJAX
	          </a>
	      </li>
	  </xpath>
    </template>
    
	<template id="testajax" name="AJAX" page="True">
		<t t-call="website.layout">

		<script type="text/javascript" src="/darb_puthod/static/src/js/website_puthod_ajax.js"></script>
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<h1>Ajax</h1>
				<div class="row">
					<div class="col-md-8">
						<div class="oe_structure">
							<div>
								<p class="tesxt">Vous pouvez marquer un NOM ci-après.</p>
								<input name="nom" type="char" class="kname"/>
								<a class="btn btn-primary ajaxi">Present</a>
							</div>
						</div>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
	</template>

	<template id="pointages" name="Pointage des Equipes" page="True">
		<t t-call="website.layout">

		<script type="text/javascript" src="/darb_puthod/static/src/js/website_puthod.js"></script>
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<h1>Pointages</h1>
				<div class="row">
					<div class="col-md-8">
						<div class="oe_structure">
							<div>
								<p>Vous pouvez marquer les présences ci-après.</p>
							</div>
						</div>
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Nom</th>
								<th>Equipe</th>
								<th>Presence</th>
							</tr>
						</thead>
						<t t-foreach="teams" t-as="team">
							<t t-foreach="team.ressource_list" t-as="membr">
							<tr>
							<td><span t-att-value="membr.id" class="membrid" t-field="membr.name"/>
							</td>
							<td><span class="teamname" t-field="team.name"/>
							</td>
							<td>
								<a class="btn btn-primary pointer">Present</a>
								<a class="btn btn-primary depointer">Absent</a>
							</td>
							</tr>
						</t></t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
	</template>

	<template id="ficheviewer" name="Saisie Chantier">
		<t t-call="website.layout">
			<script type="text/javascript" src="/darb_puthod/static/src/js/website_fiche_deletes.js"></script>
			<script type="text/javascript" src="/darb_puthod/static/src/js/website_puthod_fiche.js"></script>
			<script type="text/javascript" src="/darb_puthod/static/src/js/jquery.fn.gantt.js"></script>
			<script src="http://taitems.github.com/UX-Lab/core/js/prettify.js"></script>
			<script type="text/javascript" src="/darb_puthod/static/src/js/gantt_puthod.js"></script>
			<!-- <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tooltip.js"></script> -->
			<!-- <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-popover.js"></script> -->
			<link rel="stylesheet" href="http://taitems.github.com/UX-Lab/core/css/prettify.css"/>
			<link rel="stylesheet" type="text/css" href="/darb_puthod/static/src/css/ganttstyle.css"/>
			<link rel="stylesheet" type="text/css" href="/darb_puthod/static/src/css/font-awesome.min.css" />
			<div class="container">
				<!-- check errers msg (times, required fields)-->
				<div class="col-md-12">
				  <div t-if="error_message" class="alert alert-danger">
				      <t t-foreach="error_message" t-as="err"><t t-esc="err"/><br /></t>
				  </div>
				</div>
				<div id="main" class="row">
					<div class="col-md-14">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Gantt Employés</h3>
								<span class="pull-right clickable ganttshowme"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
								<div><span id="ganttx" class="fiechce" t-field="fiche.id"/></div>
								<div class="gantt"></div>
							</div>
						</div>
					</div>
					<div class="col-md-14">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Planning Employés</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div id="main_pointage" class="panel-body">
								<table class="table table-hover status_table">
									<thead>
										<tr class="active">
											<th>Employés</th>
											<th>Tâches</th>
											<th>Type</th>
											<th>Heure début</th>
											<th>Heure fin</th>
											<th></th>
										</tr>
									</thead>
									<t t-foreach="teams" t-as="membr">
										<tr t-attf-id="employee_{{ membr.id }}">
		          						<input id="fiche_id" type="hidden" name="fiche" t-att-value="fiche.id"/>
										<td><span class="teamname" t-field="membr.name"/>
										</td>
										<td>
					                      <select t-attf-id="tesk_{{ membr.id }}" name="tesk_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="tasks or []" t-as="task">
					                              <option t-att-value="task.id"><t t-esc="task.name"/></option>
					                          </t>
					                      </select>
										</td>
 										<td>
											<select t-attf-id="type_{{ membr.id }}" name="type" class="form-control">
												<option value="p">Préparation</option>
												<option value="d">Déplacement</option>
												<option value="pl">Plantation</option>
												<option value="t">Tonte</option>
												<option value="ta">Taille</option>
												<option value="dh">Désherbage</option>
												<option value="g">Gazon</option>
												<option value="g">Gazon plaqué</option>
												<option value="a">Arrosage</option>
												<option value="f">Fertilisation</option>
												<option value="tb">Terrasse</option>
												<option value="cl">Clôture</option>
												<option value="pr">Protection</option>
												<option value="em">Escalier-murêt</option>
												<option value="ma">Maçonnerie</option>
												<option value="di">Divers</option>
											</select>
										</td>
										<td>
											<select t-attf-id="heure_deb_{{ membr.id }}" name="heure_deb" class="form-control">
												<option value="7:00">7:00</option>
												<option value="7:15">7:15</option>
												<option value="7:30">7:30</option>
												<option value="8:00">8:00</option>
												<option value="8:15">8:15</option>
												<option value="8:30">8:30</option>
												<option value="9:00">9:00</option>
												<option value="9:15">9:15</option>
												<option value="9:30">9:30</option>
												<option value="10:00">10:00</option>
												<option value="10:15">10:15</option>
												<option value="10:30">10:30</option>
												<option value="11:00">11:00</option>
												<option value="11:15">11:15</option>
												<option value="11:30">11:30</option>
												<option value="12:00">12:00</option>
												<option value="13:00">13:00</option>
												<option value="13:15">13:15</option>
												<option value="13:30">13:30</option>
												<option value="14:00">14:00</option>
												<option value="14:15">14:15</option>
												<option value="14:30">14:30</option>
												<option value="15:00">15:00</option>
												<option value="15:15">15:15</option>
												<option value="15:30">15:30</option>
												<option value="16:00">16:00</option>
												<option value="16:15">16:15</option>
												<option value="16:30">16:30</option>
												<option value="17:00">17:00</option>
												<option value="17:15">17:15</option>
												<option value="17:30">17:30</option>
												<option value="18:00">18:00</option>
												<option value="18:15">18:15</option>
												<option value="18:30">18:30</option>
												<option value="19:00">19:00</option>
											</select>
										</td>
										<td>
											<select t-attf-id="heure_fin_{{ membr.id }}" name="heure_fin" class="form-control">
												<option value="7:00">7:00</option>
												<option value="7:15">7:15</option>
												<option value="7:30">7:30</option>
												<option value="8:00">8:00</option>
												<option value="8:15">8:15</option>
												<option value="8:30">8:30</option>
												<option value="9:00">9:00</option>
												<option value="9:15">9:15</option>
												<option value="9:30">9:30</option>
												<option value="10:00">10:00</option>
												<option value="10:15">10:15</option>
												<option value="10:30">10:30</option>
												<option value="11:00">11:00</option>
												<option value="11:15">11:15</option>
												<option value="11:30">11:30</option>
												<option value="12:00">12:00</option>
												<option value="13:00">13:00</option>
												<option value="13:15">13:15</option>
												<option value="13:30">13:30</option>
												<option value="14:00">14:00</option>
												<option value="14:15">14:15</option>
												<option value="14:30">14:30</option>
												<option value="15:00">15:00</option>
												<option value="15:15">15:15</option>
												<option value="15:30">15:30</option>
												<option value="16:00">16:00</option>
												<option value="16:15">16:15</option>
												<option value="16:30">16:30</option>
												<option value="17:00">17:00</option>
												<option value="17:15">17:15</option>
												<option value="17:30">17:30</option>
												<option value="18:00">18:00</option>
												<option value="18:15">18:15</option>
												<option value="18:30">18:30</option>
												<option value="19:00">19:00</option>
											</select>
										</td>
										<td>
											<a class="btn btn-primary addwork">Ajouter</a>
										</td>
										</tr>
									</t>
								</table>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Véhicules</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
									<!--- DEBUT BOUCLE -->
									<input id="fiche_id" type="hidden" name="fiche" t-att-value="fiche.id"/>
									<div id="main_vehicle" class="form-group form-field">
										<table id="table_vehicle" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Véhicules</th>
												<th>KMS</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.veicule_ids" t-as="veicule">
											<tr t-attf-id="vehicle_{{ veicule.id }}">
											<td><span t-field="veicule.vehicle_id.name"/>
											</td>
											<td><span t-field="veicule.kms"/>
											</td>
											<td>
												<a class="btn btn-primary deletevehicles">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="vehicle_id" name="veicule_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="vehicles or []" t-as="vehicle">
					                              <option t-att-value="vehicle.id"><t t-esc="vehicle.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input class="form-control vkm" name="vkm" type="float"/>
										</td>
										<td>
											<a class="btn btn-primary addvehicles">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Matériels</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div id="main_materiel" class="form-group form-field">
										<table id="table_materiel" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Matériels</th>
												<th>Temps</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.materiel_ids" t-as="materiel">
											<tr t-attf-id="materiel_{{ materiel.id }}">
											<td><span t-field="materiel.materiel_id.name"/>
											</td>
											<td><span t-field="materiel.temps"/>
											</td>
											<td>
												<a class="btn btn-primary deletemateriel">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="materiel_id" name="materiel_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="materiels or []" t-as="materiel">
					                              <option t-att-value="materiel.id"><t t-esc="materiel.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input class="form-control temps" name="temps" type="float"/>
										</td>
										<td>
											<a class="btn btn-primary addmateriel">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Machines</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div id="main_machine" class="form-group form-field">
										<table id="table_machine" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Machines</th>
												<th>Temps</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.machine_ids" t-as="machine">
											<tr t-attf-id="machine_{{ machine.id }}">
											<td><span t-field="machine.machine_id.name"/>
											</td>
											<td><span t-field="machine.temps"/>
											</td>
											<td>
												<a class="btn btn-primary deletemachine">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="machine_id" name="machine_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="machines or []" t-as="machine">
					                              <option t-att-value="machine.id"><t t-esc="machine.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input class="form-control mtemps" name="temps" type="float"/>
										</td>
										<td>
											<a class="btn btn-primary addmachine">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Fournitures Plantation</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div id="main_fourniture" class="form-group form-field">
										<table id="table_fourniture" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Fournitures Plantation</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.fourniture_ids" t-as="fourniture">
											<tr t-attf-id="fourniture_{{ fourniture.id }}">
											<td><span t-field="fourniture.fourniture_id.name"/>
											</td>
											<td><span t-field="fourniture.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletefourniture">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="fourniture_id" name="fourniture_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="fournitures or []" t-as="fourniture">
					                              <option t-att-value="fourniture.id"><t t-esc="fourniture.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="quantity" type="float" class="form-control qty"/>
										</td>
										<td>
											<a class="btn btn-primary addfourniture">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Kit RBKS</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div id="main_kit" class="form-group form-field">
										<table id="table_kit" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Kit RBKS</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.kit_ids" t-as="kit">
											<tr t-attf-id="kit_{{ kit.id }}">
											<td><span t-field="kit.kit_id.name"/>
											</td>
											<td><span t-field="kit.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletekit">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="kit_id" name="kit_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="kits or []" t-as="kit">
					                              <option t-att-value="kit.id"><t t-esc="kit.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="quantity" type="float" class="form-control kqty"/>
										</td>
										<td>
											<a class="btn btn-primary addkit">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>					
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Tuteurage</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>
									<!--- DEBUT BOUCLE -->
									<div id="main_tuteurage" class="form-group form-field">
										<table id="table_tuteurage" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Tuteurage</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.tuteurage_ids" t-as="tuteurage">
											<tr t-attf-id="tuteurage_{{ tuteurage.id }}">
											<td><span t-field="tuteurage.tuteurage_id.name"/>
											</td>
											<td><span t-field="tuteurage.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletetuteurage">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="tuteurage_id" name="tuteurage_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="tuteurages or []" t-as="tuteurage">
					                              <option t-att-value="tuteurage.id"><t t-esc="tuteurage.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="quantity" type="float" class="form-control tqty"/>
										</td>
										<td>
											<a class="btn btn-primary addtuteurage">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-14">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Végétaux</h3>
							<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
						</div>
						<div class="panel-body">
      							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

								<!--- DEBUT BOUCLE -->
								<div id="main_vigitaux" class="form-group form-field">
									<table id="table_vigitaux" class="table table-hover status_table">
									<thead>
										<tr class="active">
											<th>Date</th>
											<th>Végétaux</th>
											<th>Commentaires</th>
											<th></th>
										</tr>
									</thead>
									<t t-foreach="fiche.vigitaux_ids" t-as="vigitaux">
										<tr t-attf-id="vigitaux_{{ vigitaux.id }}">
										<td><span t-field="vigitaux.date"/>
										</td>
										<td><span t-field="vigitaux.vigitaux_id.name"/>
										</td>
										<td><span t-field="vigitaux.commentaire"/>
										</td>
										<td>
											<a class="btn btn-primary deletevigitaux">Supprimer</a>
										</td>

										</tr>
									</t>
									<tr>
									<td><input name="date" type="date" class="form-control date"/>
									</td>
									<td>
				                      <select id="vigitaux_id" name="vigitaux_id" class="form-control">
				                          <option value="">...</option>
				                          <t t-foreach="vigitaux_list or []" t-as="vigitaux_list_id">
				                              <option t-att-value="vigitaux_list_id.id"><t t-esc="vigitaux_list_id.name"/></option>
				                          </t>
				                      </select>
									</td>
									<td><input name="commentaire" type="text" class="form-control comment"/>
									</td>
									<td>
											<a class="btn btn-primary addvigitaux">Ajouter</a>
									</td>

									</tr>
									</table>
								</div>
								<!--- FIN BOUCLE -->
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Engazonnement</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_engrai" class="form-group form-field">
										<table id="table_engrai" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Engrais</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.engrais_ids" t-as="engrai">
											<tr t-attf-id="engrai_{{ engrai.id }}">
											<td><span t-field="engrai.engrais_id.name"/>
											</td>
											<td><span t-field="engrai.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deleteengrai">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="engrais_id" name="engrais_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="engrais or []" t-as="engrai">
					                              <option t-att-value="engrai.id"><t t-esc="engrai.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty_temps" type="float" class="form-control eqty"/>
										</td>
										<td>
											<a class="btn btn-primary addengrai">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_gazon" class="form-group form-field">
										<table id="table_gazon" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Gazons</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.gazons_ids" t-as="gazon">
											<tr t-attf-id="gazon_{{ gazon.id }}">
											<td><span t-field="gazon.gazons_id.name"/>
											</td>
											<td><span t-field="gazon.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletegazon">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="gazons_id" name="gazons_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="gazons or []" t-as="gazon">
					                              <option t-att-value="gazon.id"><t t-esc="gazon.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty_temps" type="float" class="form-control gqty"/>
										</td>
										<td>
											<a class="btn btn-primary addgazon">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_gmateriel" class="form-group form-field">
										<table id="table_gmateriel" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Matériels</th>
												<th>Tps</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.gmateriel_ids" t-as="gmateriel">
											<tr t-attf-id="gmateriel_{{ gmateriel.id }}">
											<td><span t-field="gmateriel.gmateriel_id.name"/>
											</td>
											<td><span t-field="gmateriel.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletegmateriel">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="gmateriel_id" name="gmateriel_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="gmateriels or []" t-as="gmateriel">
					                              <option t-att-value="gmateriel.id"><t t-esc="gmateriel.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty_temps" type="float" class="form-control gmqty"/>
										</td>
										<td>
											<a class="btn btn-primary addgmateriel">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Construction Bois</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_escalier" class="form-group form-field">
										<table id="table_escalier" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Construction Bois</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.escalier_ids" t-as="escalier">
											<tr t-attf-id="escalier_{{ escalier.id }}">
											<td><span t-field="escalier.escalier_id.name"/>
											</td>
											<td><span t-field="escalier.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deleteescalier">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="escalier_id" name="escalier_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="escaliers or []" t-as="escalier">
					                              <option t-att-value="escalier.id"><t t-esc="escalier.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="form-control escqty"/>
										</td>
										<td>
											<a class="btn btn-primary addescalier">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Outils</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_outilss" class="form-group form-field">
										<table id="table_outilss" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Outils</th>
												<th>Tps</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.outils_ids" t-as="outilss">
											<tr t-attf-id="outilss_{{ outilss.id }}">
											<td><span t-field="outilss.outils_id.name"/>
											</td>
											<td><span t-field="outilss.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deleteoutilss">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="outils_id" name="outils_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="outils or []" t-as="outil">
					                              <option t-att-value="outil.id"><t t-esc="outil.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="form-control oqty"/>
										</td>
										<td>
											<a class="btn btn-primary addoutils">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Clôture</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_cloture" class="form-group form-field">
										<table id="table_cloture" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Clôture</th>
												<th>Tps</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.cloture_ids" t-as="cloture">
											<tr t-attf-id="cloture_{{ cloture.id }}">
											<td><span t-field="cloture.cloture_id.name"/>
											</td>
											<td><span t-field="cloture.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletecloture">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="cloture_id" name="cloture_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="clotures or []" t-as="cloture">
					                              <option t-att-value="cloture.id"><t t-esc="cloture.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="form-control cqty"/>
										</td>
										<td>
											<a class="btn btn-primary addclotures">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Divers</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_diverss" class="form-group form-field">
										<table id="table_diverss" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Divers</th>
												<th>Qté/tps</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.divers_ids" t-as="diverss">
											<tr t-attf-id="diverss_{{ diverss.id }}">
											<td><span t-field="diverss.divers_id.name"/>
											</td>
											<td><span t-field="diverss.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletediverss">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="divers_id" name="divers_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="divers or []" t-as="diver">
					                              <option t-att-value="diver.id"><t t-esc="diver.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="form-control dqty"/>
										</td>
										<td>
											<a class="btn btn-primary adddivers">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Suite Clôture</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_sclotures" class="form-group form-field">
										<table id="table_sclotures" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Suite Clôture</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.scloture_ids" t-as="scloture">
											<tr t-attf-id="scloture_{{ scloture.id }}">
											<td><span t-field="scloture.scloture_id.name"/>
											</td>
											<td><span t-field="scloture.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deletescloture">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="scloture_id" name="scloture_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="clotures or []" t-as="scloture">
					                              <option t-att-value="scloture.id"><t t-esc="scloture.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="form-control scqty"/>
										</td>
										<td>
											<a class="btn btn-primary addsclotures">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">Terrasse</h3>
								<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
							</div>
							<div class="panel-body">
          							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

									<!--- DEBUT BOUCLE -->
									<div id="main_terrasse" class="form-group form-field">
										<table id="table_terrasse" class="table table-hover status_table">
										<thead>
											<tr class="active">
												<th>Terrasse</th>
												<th>Qté</th>
												<th></th>
											</tr>
										</thead>
										<t t-foreach="fiche.terrasse_ids" t-as="terrasse">
											<tr t-attf-id="terrasse_{{ terrasse.id }}">
											<td><span t-field="terrasse.terrasse_id.name"/>
											</td>
											<td><span t-field="terrasse.quantity"/>
											</td>
											<td>
												<a class="btn btn-primary deleteterrasse">Supprimer</a>
											</td>

											</tr>
										</t>
										<tr>
										<td>
					                      <select id="terrasse_id" name="terrasse_id" class="form-control">
					                          <option value="">...</option>
					                          <t t-foreach="terrasses or []" t-as="terrasse">
					                              <option t-att-value="terrasse.id"><t t-esc="terrasse.name"/></option>
					                          </t>
					                      </select>
										</td>
										<td><input name="qty" type="float" class="form-control terqty"/>
										</td>
										<td>
											<a class="btn btn-primary addterrasses">Ajouter</a>
										</td>

										</tr>
										</table>
									</div>
									<!--- FIN BOUCLE -->
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-14">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Commentaire</h3>
							<span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
						</div>
						<div class="panel-body">
      							<input type="hidden" name="fiche" t-att-value="fiche.id"/>

								<!--- DEBUT BOUCLE -->
								<div class="form-group form-field">
									<table id="CommentTable" class="table table-hover status_table">
										<tr id="edit">
											<td><span type="text" class="form-control read_comment" cols="100" t-field="fiche.remarqs"/></td>
											<td align="right"><a class="btn btn-primary" id="editcomment">Modifier</a></td>
										</tr>
										<tr id="write" style="display: none">
											<td><textarea id="comment" class="form-control" cols="100" t-field="fiche.remarqs"></textarea></td>
											<td align="right"><a class="btn btn-primary addcomment">Ajouter</a></td>
										</tr>
									</table>
								</div>
								<!--- FIN BOUCLE -->
						</div>
					</div>
				</div>
			</div>

			<style>
				.panel-heading span
				{
					margin-top: -20px;
					font-size: 15px;
				}

				.row
				{
					margin-top: 40px;
					padding: 0 10px;
				}

				.clickable
				{
					cursor: pointer;
				}
			</style>

			<script type="text/javascript">
				jQuery(function ($) {
					$('.panel-heading span.clickable').on("click", function (e) {
						if ($(this).hasClass('panel-collapsed')) {
							// expand the panel
							$(this).parents('.panel').find('.panel-body').slideDown();
							$(this).removeClass('panel-collapsed');
							$(this).find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
						}
						else {
							// collapse the panel
							$(this).parents('.panel').find('.panel-body').slideUp();
							$(this).addClass('panel-collapsed');
							$(this).find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
						}
					});
				});
			</script>
		</t>
	</template>

    <template id="listchantiers" name="Liste des chantiers ouverts">
    	<t t-call="website.layout">
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<h1>Chantiers Ouverts</h1>
				<div class="row">
					<div class="col-md-8">
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Référence</th>
								<th>Client</th>
								<th>Chantier</th>
								<th>Date prévue</th>
								<th>Equipe</th>
							</tr>
						</thead>
						<t t-foreach="chantiers" t-as="chantier">
							<tr>
							<td><a href="/chantiersForm"><span t-field="chantier.name"/></a>
							</td>
							<td><span t-field="chantier.partner_id.name"/>
							</td>
							<td><span t-field="chantier.chantier_id.name"/>
							</td>
							<td><span t-field="chantier.inter_date"/>
							</td>
							<td><span t-field="chantier.equipe_id.name"/>
							</td>
							</tr>
						</t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
    </template>


<!--liste des fiches-->
    <template id="listfiches" name="Liste des fiches de chantiers">
    	<t t-call="website.layout">
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<h1>Fiches de chantiers</h1>
				<div class="row">
					<div class="col-md-11">
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Référence</th>
								<th>Date d'intervention</th>
								<th>Responsable</th>
								<th>Equipe</th>
								<th>Status FC</th>
							</tr>
						</thead>
						<t t-set="hour_variable" t-value="0" />
						<t t-set="cycle_variable" t-value="0" />
						<t t-set="qte_variable" t-value="0" />
						<t t-foreach="fiches" t-as="fiche">
							<t t-set="hour_variable" t-value="hour_variable+fiche.hour_total" />
							<t t-set="cycle_variable" t-value="cycle_variable+fiche.cycle_total" />
							<t t-set="qte_variable" t-value="qte_variable+fiche.product_qty" />
							<tr>
							<td><a t-attf-href="/ficheslist/#{fiche.id}"><span t-field="fiche.name"/></a>
							</td>
							<td><span t-field="fiche.inter_date"/>
							</td>
							<td><span t-field="fiche.user_id"/>
							</td>
							<td><span t-field="fiche.equipe_id"/>
							</td>
							<td><span t-field="fiche.state"/>
							</td>
							</tr>
						</t>
							<th></th>
							<th></th>
							<th></th>
							<th>
								<t t-esc="qte_variable"/>
							</th>
							<th class="text-left">
								<t t-esc="hour_variable"/>
							</th>
							<th class="text-left">
								<t t-esc="cycle_variable"/>
							</th>
							<td></td>
						</table>
					</div>
					<div class="col-md-1 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
    </template>

    <template id="formchantiers" name="Form des chantiers ouverts">

    	<t t-call="website.layout">

	  <div class="container panel-group mb32 mt32" id="debug_infos">
	      <li t-foreach="chantiers" t-as="cho">
	              <i class="fa"></i>
	              CO <div t-field="cho.name"/>
	      </li>

	  </div></t>
    </template>

	<template id="newchantiers" name="Form des chantiers ouverts">

    	<t t-call="website.layout">
		<div class="container panel-group mb32 mt32" id="debug_infos">
			<div id="xmap" style="width:1000px;height:1000px"></div>
		    <script language="javascript">
		    function initMap(domain){
		    	odoo.define('custom_webpage.my_js', function (require) {'use strict';
		    	var Model = require('web.Model');

				var model = new Model('fiche.chantier');
		    	model.call('get_google_maps_data', [[]]).then(function(results){
					var locations = results[0];
					var gm_configs = results[1];
					var map = new google.maps.Map(document.getElementById('xmap'), {
					  	zoom : gm_configs[2],
					  	center : new google.maps.LatLng(gm_configs[0], gm_configs[1]),
					  	mapTypeId : google.maps.MapTypeId.TERRAIN,
					  	mapTypeControl: false
					});
					console.log(locations);
					var infowindow = new google.maps.InfoWindow();

					var marker, i;

					for (i = 0; i &lt; locations.length; i++) {
					  	marker = new google.maps.Marker({
					  		position : new google.maps.LatLng(locations[i][1], locations[i][2]),
					  		map : map
					  	});
						var location = "../ficheslist/" + locations[i][3];
					  	google.maps.event.addListener(marker, 'click', (function(marker, i) {
					  		return function() {
					  			infowindow.setContent('<div>'+
										            '<h3>Fiche chantier</h3>'+
										            '<div>'+
										            '<p><b>'+locations[i][0]+'</b></p>'+
										            '<p align="center"><a class="btn btn-primary pointer" href="' + location + '">'+
										            'Consulter</a> '+
            										'</p>'+
										            '</div>'+
										            '</div>');
					  			infowindow.open(map, marker);
					  		}
					  	})(marker, i));
						google.maps.event.addListener(marker, "dblclick", (function (marker, i) {
					  		return function() {
				            	console.log("hhhhhhhhhhhhhhhhhhh");
								window.location.href = "/equiplist/chantier/"+locations[i][3];
							}
			            })(marker, i));
					  }
				});});
		    }
		    </script>
			<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD6zrIunSsB1pHvcaqUsSzqgneTR5ZcCz4&amp;callback=initMap"/>

		</div></t>
    </template>

	<template id="listequipes" name="Liste des equipes">
    	<t t-call="website.layout">
		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<div class="row">
					<div class="col-md-8">
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Nom</th>
								<th>Chef</th>
								<th>Affecter</th>
							</tr>
						</thead>
						<t t-foreach="equipes" t-as="equipe">
							<tr>
							<td><span t-field="equipe.name"/>
							</td>
							<td><span t-field="equipe.manager.name"/>
							</td>
							<td><a t-attf-href="/equiplist/chantier/#{chantier_id}/#{equipe.id}" class="btn btn-primary pointer">Affecter</a>
							</td>
							</tr>
						</t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>

    </template>
    	<template id="newequipes" name="Equipes" page="True">
		<t t-call="website.layout">

		  <div id="wrap">
			<div class="oe_structure"/>
			<div class="container">
				<div class="row">
					<div class="col-md-8">
						<div class="oe_structure">
							<div>
								<p>.</p>
							</div>
						</div>
						<table class="table table-hover status_table">
						<thead>
							<tr class="active">
								<th>Employés</th>
								<th>Affecter</th>
							</tr>
						</thead>
						<t t-foreach="employees" t-as="membr">
							<tr>
							<td><span t-att-value="membr.id" class="membrid" t-field="membr.name"/>
							</td>
							<td>
								<a t-attf-href="/equipes//#{equipe}/#{membr.id}" class="btn btn-primary depointer">Affecter</a>
							</td>
							</tr>
						</t>
						</table>
					</div>
					<div class="col-md-4 mb32">
						<t t-call="website.company_description"/>
					</div>
				</div>
			</div>
			<div class="oe_structure"/>
		  </div>
		</t>
	</template>
</odoo>